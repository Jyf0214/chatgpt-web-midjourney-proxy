import{d as G,an as E,H as W,u as q,X as K,l as S,r as k,o as y,c as I,a as t,$ as s,b as a,J as e,N as L,a4 as i,_ as h,a5 as _,a1 as Y,ab as b,bp as X,O as Q,a3 as Z,b3 as ee,Y as M,b9 as F,S as te,bq as se,I as A,W as N,bd as ae,br as ne,b5 as oe,b2 as R,G as ie,aL as le,a6 as re}from"./index-b574640b.js";import{a as ce,_ as ue}from"./aiSetServer.vue_vue_type_script_setup_true_lang-4388d0a7.js";import"./Slider-5fdb45e2.js";import"./Switch-a0db0e58.js";function de(){const x=new Date,m=x.getDate(),v=x.getMonth()+1;return`${x.getFullYear()}-${v}-${m}`}const pe={class:"p-4 space-y-5 min-h-[200px]"},me={class:"space-y-6"},ve={class:"flex items-center space-x-4"},fe={class:"flex-shrink-0 w-[100px]"},ge={class:"flex-1"},he={class:"flex items-center space-x-4"},ye={class:"flex-shrink-0 w-[100px]"},_e={class:"w-[200px]"},ke={class:"flex items-center space-x-4"},be={class:"flex-shrink-0 w-[100px]"},xe={class:"w-[200px]"},$e={class:"flex items-center space-x-4"},we={class:"flex-shrink-0 w-[100px]"},Se={class:"flex-1"},Ce={class:"flex-shrink-0 w-[100px]"},Ie={class:"flex flex-wrap items-center gap-4"},je={class:"flex items-center space-x-4"},Ne={class:"flex-shrink-0 w-[100px]"},Ue={class:"flex flex-wrap items-center gap-4"},Pe={class:"flex items-center space-x-4"},Ve={class:"flex-shrink-0 w-[100px]"},Te={class:"flex flex-wrap items-center gap-4"},ze={class:"flex items-center space-x-4"},De={class:"flex-shrink-0 w-[100px]"},Le=G({__name:"General",setup(x){const m=E(),v=W(),{isMobile:u}=q(),c=K(),$=S(()=>m.theme),f=S(()=>v.userInfo),d=k(f.value.avatar??""),g=k(f.value.name??""),n=k(f.value.description??""),p=k(f.value.backgroundImage??""),U=S({get(){return m.language},set(o){m.setLanguage(o)}}),P=[{label:"Auto",key:"auto",icon:"ri:contrast-line"},{label:"Light",key:"light",icon:"ri:sun-foggy-line"},{label:"Dark",key:"dark",icon:"ri:moon-foggy-line"}],V=[{label:"简体中文",key:"zh-CN",value:"zh-CN"},{label:"繁體中文",key:"zh-TW",value:"zh-TW"},{label:"English",key:"en-US",value:"en-US"},{label:"한국어",key:"ko-KR",value:"ko-KR"},{label:"Русский язык",key:"ru-RU",value:"ru-RU"},{label:"Tiếng Việt",key:"vi-VN",value:"vi-VN"},{label:"Français",key:"fr-FR",value:"fr-FR"},{label:"Türkçe",key:"tr-TR",value:"tr-TR"}];function w(o){v.updateUserInfo(o),c.success(M("common.success"))}function T(){v.resetUserInfo(),c.success(M("common.success")),window.location.reload()}function z(){const o=de(),l=localStorage.getItem("chatStorage")||"{}",r=JSON.stringify(JSON.parse(l),null,2),C=new Blob([r],{type:"application/json"}),D=URL.createObjectURL(C),j=document.createElement("a");j.href=D,j.download=`chat-store_${o}.json`,document.body.appendChild(j),j.click(),document.body.removeChild(j)}function O(o){const l=o.target;if(!l||!l.files)return;const r=l.files[0];if(!r)return;const C=new FileReader;C.onload=()=>{try{const D=JSON.parse(C.result);localStorage.setItem("chatStorage",JSON.stringify(D)),c.success(M("common.success")),location.reload()}catch{c.error(M("common.invalidFileFormat"))}},C.readAsText(r)}function J(){localStorage.removeItem("chatStorage"),location.reload()}function H(){const o=document.getElementById("fileInput2");o&&o.click()}return(o,l)=>(y(),I("div",pe,[t("div",me,[t("div",ve,[t("span",fe,s(o.$t("setting.avatarLink")),1),t("div",ge,[a(e(L),{value:d.value,"onUpdate:value":l[0]||(l[0]=r=>d.value=r),placeholder:""},null,8,["value"])]),a(e(_),{size:"tiny",text:"",type:"primary",onClick:l[1]||(l[1]=r=>w({avatar:d.value}))},{default:i(()=>[h(s(o.$t("common.save")),1)]),_:1})]),t("div",he,[t("span",ye,s(o.$t("setting.name")),1),t("div",_e,[a(e(L),{value:g.value,"onUpdate:value":l[2]||(l[2]=r=>g.value=r),placeholder:""},null,8,["value"])]),a(e(_),{size:"tiny",text:"",type:"primary",onClick:l[3]||(l[3]=r=>w({name:g.value}))},{default:i(()=>[h(s(o.$t("common.save")),1)]),_:1})]),t("div",ke,[t("span",be,s(o.$t("setting.backgroundImage")),1),t("div",xe,[a(e(L),{value:p.value,"onUpdate:value":l[4]||(l[4]=r=>p.value=r),placeholder:""},null,8,["value"])]),a(e(_),{size:"tiny",text:"",type:"primary",onClick:l[5]||(l[5]=r=>w({backgroundImage:p.value}))},{default:i(()=>[h(s(o.$t("common.save")),1)]),_:1})]),t("div",$e,[t("span",we,s(o.$t("setting.description")),1),t("div",Se,[a(e(L),{value:n.value,"onUpdate:value":l[6]||(l[6]=r=>n.value=r),placeholder:""},null,8,["value"])]),a(e(_),{size:"tiny",text:"",type:"primary",onClick:l[7]||(l[7]=r=>w({description:n.value}))},{default:i(()=>[h(s(o.$t("common.save")),1)]),_:1})]),t("div",{class:Y(["flex items-center space-x-4",e(u)&&"items-start"])},[t("span",Ce,s(o.$t("setting.chatHistory")),1),t("div",Ie,[a(e(_),{size:"small",onClick:z},{icon:i(()=>[a(e(b),{icon:"ri:download-2-fill"})]),default:i(()=>[h(" "+s(o.$t("common.export")),1)]),_:1}),t("input",{id:"fileInput2",type:"file",style:{display:"none"},onChange:O},null,32),a(e(_),{size:"small",onClick:H},{icon:i(()=>[a(e(b),{icon:"ri:upload-2-fill"})]),default:i(()=>[h(" "+s(o.$t("common.import")),1)]),_:1}),a(e(X),{placement:"bottom",onPositiveClick:J},{trigger:i(()=>[a(e(_),{size:"small"},{icon:i(()=>[a(e(b),{icon:"ri:close-circle-line"})]),default:i(()=>[h(" "+s(o.$t("common.clear")),1)]),_:1})]),default:i(()=>[h(" "+s(o.$t("chat.clearHistoryConfirm")),1)]),_:1})])],2),t("div",je,[t("span",Ne,s(o.$t("setting.theme")),1),t("div",Ue,[(y(),I(Q,null,Z(P,r=>a(e(_),{key:r.key,size:"small",type:r.key===e($)?"primary":void 0,onClick:C=>e(m).setTheme(r.key)},{icon:i(()=>[a(e(b),{icon:r.icon},null,8,["icon"])]),_:2},1032,["type","onClick"])),64))])]),t("div",Pe,[t("span",Ve,s(o.$t("setting.language")),1),t("div",Te,[a(e(ee),{style:{width:"140px"},value:e(U),options:V,onUpdateValue:l[8]||(l[8]=r=>e(m).setLanguage(r))},null,8,["value"])])]),t("div",ze,[t("span",De,s(o.$t("setting.resetUserInfo")),1),a(e(_),{size:"small",onClick:T},{default:i(()=>[h(s(o.$t("common.reset")),1)]),_:1})])])]))}}),Me="chatgpt-web-midjourney-proxy",Re="2.21.1",Ae="ChatGPT Web Midjourney Proxy",Ge="Dooy <ydlhero@gmail.com>",Be=["chatgpt-web","chatgpt","chatbot","Midjourney","Midjourney UI","Midjourney Proxy","gpts","gpts ui","vue"],Fe={dev:"vite",build:"run-p build-only",buildold:"run-p type-check build-only",preview:"vite preview","build-only":"vite build","type-check":"vue-tsc --noEmit",lint:"eslint .","lint:fix":"eslint . --fix",bootstrap:"pnpm install && pnpm run common:prepare","common:cleanup":"rimraf node_modules && rimraf pnpm-lock.yaml","common:prepare":"husky install"},Oe={"@ffmpeg/ffmpeg":"^0.12.10","@ffmpeg/util":"^0.12.1","@traptitech/markdown-it-katex":"^3.6.0","@vueuse/core":"^9.13.0","eventsource-parser":"^1.1.1","form-data":"^4.0.0","gpt-tokenizer":"^2.1.2","highlight.js":"^11.7.0",html2canvas:"^1.4.1","js-audio-recorder":"^1.0.7",katex:"^0.16.4",localforage:"^1.10.0","markdown-it":"^13.0.1","naive-ui":"^2.34.3",pinia:"^2.0.33",vue:"^3.2.47","vue-i18n":"^9.2.2","vue-router":"^4.1.6","vue-turnstile":"^1.0.8","vue-waterfall-plugin-next":"^2.3.1"},Je={"@antfu/eslint-config":"^0.35.3","@commitlint/cli":"^17.4.4","@commitlint/config-conventional":"^17.4.4","@iconify/vue":"^4.1.0","@tauri-apps/cli":"^1.5.11","@types/crypto-js":"^4.1.1","@types/katex":"^0.16.0","@types/markdown-it":"^12.2.3","@types/markdown-it-link-attributes":"^3.0.1","@types/node":"^18.14.6","@vitejs/plugin-vue":"^4.0.0",autoprefixer:"^10.4.13",axios:"^1.3.4","crypto-js":"^4.1.1",eslint:"^8.35.0","http-proxy-middleware":"^2.0.6",husky:"^8.0.3",less:"^4.1.3","lint-staged":"^13.1.2","markdown-it-link-attributes":"^4.0.1","npm-run-all":"^4.1.5",postcss:"^8.4.21",rimraf:"^4.2.0",tailwindcss:"^3.3.6",typescript:"~4.9.5",vite:"^4.2.0","vite-plugin-pwa":"^0.14.4","vite-plugin-static-copy":"^0.17.0","vue-tsc":"^1.2.0"},B={name:Me,version:Re,private:!1,description:Ae,author:Ge,keywords:Be,scripts:Fe,dependencies:Oe,devDependencies:Je,"lint-staged":{"*.{ts,tsx,vue}":["pnpm lint:fix"]}},He={class:"p-4 space-y-4"},Ee={class:"text-xl font-bold"},We={key:0,class:"text-red-500",href:"https://github.com/Dooy/chatgpt-web-midjourney-proxy",target:"_blank"},qe={key:1,class:"text-gray-500",href:"https://github.com/Dooy/chatgpt-web-midjourney-proxy",target:"_blank"},Ke={class:"p-2 space-y-2 rounded-md bg-neutral-100 dark:bg-neutral-700"},Ye=["innerHTML"],Xe={key:0,class:"flex items-center justify-between"},Qe={key:1},Ze=G({__name:"About",setup(x){const m=F(),v=k(!1),u=k(),c=k({lastVersion:""}),$=S(()=>!!m.isChatGPTAPI);async function f(){try{v.value=!0;const n=await ne();u.value={usage:n.usage?`${n.usage}`:"-",remaining:n.remaining?`${n.remaining}`:"-",hard_limit_usd:n.hard_limit_usd?`${n.hard_limit_usd}`:"-",apiModel:"ChatGPTAPI",reverseProxy:"-",timeoutMs:1e5,socksProxy:"-",httpsProxy:"-"}}finally{v.value=!1}}const d=()=>{const n=localStorage.getItem("lastVersion");if(!n)return"";const p=JSON.parse(n);return Date.now()-p.t>1e3*60*60?"":p.v};te(()=>{f();let n=d();n?c.value.lastVersion=n:se().then(p=>{p[0]&&p[0].name&&(c.value.lastVersion=p[0].name,localStorage.setItem("lastVersion",JSON.stringify({v:p[0].name,t:Date.now()})))})});const g=S(()=>c.value.lastVersion&&c.value.lastVersion!=`v${B.version}`);return(n,p)=>(y(),A(e(ae),{show:v.value},{default:i(()=>{var U,P,V,w,T,z;return[t("div",He,[t("h2",Ee,[h(" Version - "+s(e(B).version)+" ",1),e(g)?(y(),I("a",We," ("+s(n.$t("mj.findVersion"))+" "+s(c.value.lastVersion)+")",1)):c.value.lastVersion?(y(),I("a",qe," ("+s(n.$t("mj.yesLastVersion"))+")",1)):N("",!0)]),t("div",Ke,[t("p",{innerHTML:n.$t("mj.infoStar")},null,8,Ye)]),t("p",null,s(n.$t("setting.api"))+"："+s(((U=u.value)==null?void 0:U.apiModel)??"-"),1),e($)?(y(),I("p",Xe,[t("div",null,s(n.$t("setting.monthlyUsage"))+"："+s(((P=u.value)==null?void 0:P.usage)??"-"),1),t("div",null,s(n.$t("mj.totalUsage"))+"："+s((V=u.value)!=null&&V.hard_limit_usd?(+((w=u.value)==null?void 0:w.hard_limit_usd)).toFixed(2):"-"),1),t("div",null,s(n.$t("setting.balance"))+"："+s(((T=u.value)==null?void 0:T.remaining)??"-"),1)])):N("",!0),e($)?N("",!0):(y(),I("p",Qe,s(n.$t("setting.reverseProxy"))+"："+s(((z=u.value)==null?void 0:z.reverseProxy)??"-"),1))])]}),_:1},8,["show"]))}}),et={class:"ml-2"},tt={class:"min-h-[100px]"},st={class:"ml-2"},at={class:"min-h-[100px]"},nt={class:"ml-2"},ot={class:"ml-2"},ut=G({__name:"index",props:{visible:{type:Boolean}},emits:["update:visible"],setup(x,{emit:m}){const v=x,u=F(),c=S(()=>!!u.isChatGPTAPI),$=k("General"),f=S({get(){return v.visible},set(d){m("update:visible",d)}});return(d,g)=>(y(),A(e(re),{show:e(f),"onUpdate:show":g[1]||(g[1]=n=>le(f)?f.value=n:null),"auto-focus":!1,preset:"card",style:{width:"95%","max-width":"640px"}},{default:i(()=>[t("div",null,[a(e(oe),{value:$.value,"onUpdate:value":g[0]||(g[0]=n=>$.value=n),type:"line",animated:""},{default:i(()=>[a(e(R),{name:"General",tab:"General"},{tab:i(()=>[a(e(b),{class:"text-lg",icon:"ri:file-user-line"}),t("span",et,s(d.$t("setting.general")),1)]),default:i(()=>[t("div",tt,[a(Le)])]),_:1}),e(c)?(y(),A(e(R),{key:0,name:"Advanced",tab:"Advanced"},{tab:i(()=>[a(e(b),{class:"text-lg",icon:"ri:equalizer-line"}),t("span",st,s(d.$t("mjset.model")),1)]),default:i(()=>[t("div",at,[a(ce)])]),_:1})):N("",!0),e(ie).myData.session.isHideServer?N("",!0):(y(),A(e(R),{key:1,name:"server",tab:"server"},{tab:i(()=>[a(e(b),{class:"text-lg",icon:"mingcute:server-line"}),t("span",nt,s(d.$t("mjset.server")),1)]),default:i(()=>[a(ue)]),_:1})),a(e(R),{name:"Config",tab:"Config"},{tab:i(()=>[a(e(b),{class:"text-lg",icon:"ri:list-settings-line"}),t("span",ot,s(d.$t("mjset.about")),1)]),default:i(()=>[a(Ze)]),_:1})]),_:1},8,["value"])])]),_:1},8,["show"]))}});export{ut as default};
